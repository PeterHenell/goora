version: '2'

services: 
#  go:
#    image: goora:latest
#    volumes:
#      - ./12.2/golang1.10stretch:/goora
  
  oracledb:
    image: container-registry.oracle.com/database/enterprise:12.2.0.1
    environment: 
      - NLS_LANG=AMERICAN_AMERICA.UTF8
    ports:
      - 1521:1521
      - 5500:5500

  oracle-collector:
    build: ./12.2/golang1.10stretch
    restart: on-failure
    command: go run main.go
    environment: 
      - DATA_SOURCE_NAME=C##demouser/hemligt@oracledb:1521/ORCLCDB.localdomain
      - NLS_LANG=AMERICAN_AMERICA.UTF8
    ports:
      - "8000:8000"
      - "9161:9161"
    links: 
      - oracledb:oracledb
    working_dir: /go/src/oracle-collector
    volumes:
      - ./12.2/golang1.10stretch/oracle-collector:/go/src/oracle-collector
